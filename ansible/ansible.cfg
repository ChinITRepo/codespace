# Infrastructure Automation Framework - Ansible Configuration

[defaults]
inventory           = ./inventory/hosts.yml
remote_tmp          = ~/.ansible/tmp
local_tmp           = ~/.ansible/tmp
forks               = 20
sudo_user           = root
ask_sudo_pass       = False
ask_pass            = False
transport           = smart
gathering           = smart
host_key_checking   = False
timeout             = 60
remote_user         = ansible
interpreter_python  = auto_silent

# Cache facts to improve performance
fact_caching            = jsonfile
fact_caching_connection = ./.facts_cache
fact_caching_timeout    = 7200

# Improve playbook execution output
stdout_callback = yaml

# Logging
log_path = ./logs/ansible.log

# Plugin configurations
callback_whitelist = timer, profile_tasks

[inventory]
enable_plugins = yaml, ini, host_list

[privilege_escalation]
become = True
become_method = sudo
become_user = root
become_ask_pass = False

[ssh_connection]
ssh_args = -o ControlMaster=auto -o ControlPersist=60s -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null
pipelining = True
control_path = /tmp/ansible-ssh-%%h-%%p-%%r
retries = 3

[vault]
# Use the following environments variables:
# ANSIBLE_VAULT_PASSWORD_FILE=./.vault_pass
# ANSIBLE_VAULT_IDENTITY_LIST="dev@./.dev_vault_pass,prod@./.prod_vault_pass" 